# Настройка токенов для связи админки и сайта

## Быстрая настройка (5 минут)

### Шаг 1: Сгенерируйте токен

Выполните в терминале:
```bash
openssl rand -hex 32
```

Или используйте онлайн: https://www.random.org/strings/
- Length: 64
- Characters: A-Z, a-z, 0-9

Скопируйте сгенерированный токен.

### Шаг 2: Настройте переменные окружения в Vercel

#### В админке (project: siteadmin):

1. Зайдите на https://vercel.com
2. Выберите проект `siteadmin` (или ваш проект админки)
3. Settings → Environment Variables
4. Добавьте:
   - **Name:** `VITE_ADMIN_EDIT_TOKEN`
   - **Value:** ваш сгенерированный токен
   - **Environment:** Production, Preview, Development (все)
5. Сохраните

#### На сайте (project: delever-site):

1. Зайдите на https://vercel.com
2. Выберите проект `delever-site`
3. Settings → Environment Variables
4. Добавьте:
   - **Name:** `ADMIN_EDIT_TOKEN`
   - **Value:** тот же токен, что и в админке
   - **Environment:** Production, Preview, Development (все)
5. Сохраните

### Шаг 3: Передеплойте проекты

После добавления переменных окружения:
1. Передеплойте админку (Redeploy в Vercel)
2. Передеплойте сайт (Redeploy в Vercel)

Или просто сделайте push в main - Vercel автоматически передеплоит.

## Проверка

После настройки:
1. Откройте админку
2. Перейдите в раздел "Редактор"
3. Сайт должен загрузиться без ошибки 401
4. Элементы должны автоматически загрузиться

## Безопасность

- ✅ Токен хранится в переменных окружения (не в коде)
- ✅ Токен не виден в исходном коде
- ✅ Можно регулярно менять токен
- ⚠️ Токен передается в URL (виден в логах, но это приемлемо для внутреннего использования)

## Смена токена

Если нужно сменить токен:
1. Сгенерируйте новый токен
2. Обновите переменные окружения в обоих проектах
3. Передеплойте оба проекта

## Отладка

Если не работает:
1. Проверьте, что токены одинаковые в обоих проектах
2. Проверьте, что переменные окружения добавлены во все окружения (Production, Preview, Development)
3. Проверьте логи в Vercel
4. Убедитесь, что проекты передеплоены после добавления переменных

