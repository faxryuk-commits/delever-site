# Финальное решение проблемы 401 для статических ресурсов

## Проблема

Статические ресурсы (JS, CSS файлы в `/assets/`) загружаются без query параметров `admin_token` и `x-vercel-protection-bypass`, поэтому Vercel Authentication блокирует их с ошибкой 401.

## Решение

### ❌ Почему Protection Bypass не работает для статических файлов

Protection Bypass работает только для запросов, которые явно содержат секрет в URL или заголовке. Статические ресурсы загружаются браузером автоматически из HTML, и мы не можем добавить к ним query параметры.

### ✅ Единственное решение: Отключить Vercel Authentication

Для публичного сайта это нормально, так как:
1. Сайт должен быть доступен публично
2. Токен `admin_token` все равно защищает редактирование
3. Админка имеет свою систему авторизации

## Шаги для решения

### 1. Отключите Vercel Authentication

1. Зайдите на https://vercel.com
2. Выберите проект `delever-site`
3. **Build and Deployment** → **Deployment Protection**
4. Найдите **"Vercel Authentication"**
5. **Отключите** переключатель (должен быть серым, не синим)
6. Сохраните изменения

### 2. Передеплойте проект

После отключения:
- Передеплойте проект (Redeploy)
- Или просто сделайте push в main

### 3. Проверьте

После передеплоя:
1. Откройте админку → Редактор
2. Проверьте Network tab:
   - Все запросы должны быть `200 OK`
   - Статические файлы должны загружаться
3. Сайт должен загрузиться в iframe
4. Элементы должны автоматически загрузиться

## Альтернативные решения (не рекомендуются)

### Вариант 1: Исключения для статических файлов
Требует Pro план ($150/месяц) для "Deployment Protection Exceptions"

### Вариант 2: Service Worker
Можно использовать Service Worker для перехвата запросов и добавления параметров, но это сложно и может вызвать проблемы с кэшированием.

### Вариант 3: Прокси-сервер
Создать прокси, который добавляет параметры к запросам, но это избыточно для публичного сайта.

## Итог

**Для публичного сайта единственное правильное решение - отключить Vercel Authentication.**

После отключения:
- ✅ Сайт будет доступен публично (это нормально)
- ✅ Токен `admin_token` защищает редактирование
- ✅ Админка защищена своей авторизацией
- ✅ Статические ресурсы загрузятся без ошибок

